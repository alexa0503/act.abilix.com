function wxShare(a){wx.ready(function(){wx.onMenuShareAppMessage({title:a.title,desc:a.desc,link:a.link,imgUrl:a.imgUrl,type:a.type||"link",dataUrl:a.dataUrl||"",success:function(){},cancel:function(){}}),wx.onMenuShareAppMessage({title:a.title,desc:a.desc,link:a.link,imgUrl:a.imgUrl,type:a.type||"link",dataUrl:a.dataUrl||"link",success:function(){},cancel:function(){}})})}function getWork(a){$(document).bind(".abilix");var e="/work/"+a;$.ajax({url:e,dataType:"json",method:"GET"}).done(function(a){var e=$("#page-work .heart a");$("#work-id").html(a.id),$("#work-image").attr("src",a.image),$("#work-name").html(a.name),$("#work-vote").html(a.vote_num),a.has_voted?e.find("img").eq(1).removeClass("hide"):e.find("img").eq(0).removeClass("hide"),$(".page").addClass("hide"),$("#page-work").removeClass("hide"),$("#page-work .heart a").bind("click",function(i){vote(a.id,e)})}).fail(function(){alert("获取信息失败，请稍候重试~")}).always(function(){}),$("#page-work").hasClass("hide")?wxData.link="/":wxData.link="/list/"+a,wxShare(wxData)}function vote(a,e){$(document).unbind(".abilix");var i="/vote/"+a;hasVoted||(hasVoted=!0,$.ajax({url:i,dataType:"json",method:"GET"}).done(function(a){var i,n=e.find("img"),t=e.parent(".heart");n.eq(1).hasClass("hide")?(i=t.append('<div class="animation1">+1</div>').find(".animation1")).animate({top:"-20px"},800,"linear",function(){i.hide(20).remove(),n.eq(0).addClass("hide"),n.eq(1).removeClass("hide"),t.find("span").text(a.vote_num),hasVoted=!1}):(i=t.append('<div class="animation2">-1</div>').find(".animation2")).animate({top:"80px"},800,"linear",function(){i.hide(20).remove(),n.eq(1).addClass("hide"),n.eq(0).removeClass("hide"),t.find("span").text(a.vote_num),hasVoted=!1})}).fail(function(){alert("点赞失败，请稍候重试~"),hasVoted=!1}).always(function(){}))}var wxData={link:""},hasVoted=!1;